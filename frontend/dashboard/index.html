<!DOCTYPE html>
<html class="no-js" lang="en" >

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Ingage Dashboard</title>

	<link rel="stylesheet" href="../assets/css/dashboard.css">

	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
	<script src="js/vendor/custom.modernizr.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
	<script src="js/backbone.basicauth.js"></script>
	<script src="js/md5.js"></script>
	<script src="js/jquery.cookie.js"></script>
	<script src="http://timeago.yarp.com/jquery.timeago.js"></script>
	<script src="js/dashboard.backbone.js"></script>
</head>

<body>

	<div class="main-app"></div>

	<script type="text/template" id="login-template">
		<div class="contain-to-grid">
			<header class="top-bar" data-topbar>
				<ul class="title-area">
					<li class="name">
						<h1><a href="http://ingagelive.com"><img src="images/logo.png" alt="Ingage Dashbaord"></a></h1>
					</li>
					<li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
				</ul>
				<section class="top-bar-section">
					<ul class="right">
						<li><a href="#" >Contact</a></li>      
					</ul>
				</section>
			</header>
		</div>
		<div class="row login">
			<div class="small-4 columns">
				<p class="primary-message">Your in-venue customer experience management system</p>
			</div>
			<div class="small-3 small-offset-1 columns">
				<img src="images/phone.png" >
			</div>
			<div class="small-3 small-offet-1 columns panel">
				<div class="login-alert">
					<div class="alert-box error" style="display: none;" data-alert="">
						Incorrect Username/Password
					</div>
				</div>
				<form id="login-form" name="login-form" class="login-form">
					<fieldset>
						<div class="form-element">
							<label for="name">Username: </label>
							<input type="text" required id="name" name="username" />
							<label for="password">Password: </label>
							<input type="password" required id="password" name="password" />
						</div>
					</fieldset>
					<div class="form-element text-right">
						<button id="login-submit" type="submit" class="small fullwidth primary">Log in</button>
						<div class="button small fullwidth loading" style="display:none;">
							<span class="alert-text">
								Loading
								<span class="spinner-css">      
									<span class="side sp_left">
										<span class="fill"></span>
									</span>
									<span class="side sp_right">
										<span class="fill"></span>
									</span>
								</span>
							</span>
						</div>
					</div>
				</form>    
				<p class="secondary secondary-color">Want to Sign up? <br>Reach us at ingage@mutinylabs.in</p>
			</div>
		</div>
	</div>
</script>

<script type="text/template" id="header-template">
	<div class="contain-to-grid">
		<header class="top-bar" data-topbar>
			<ul class="title-area">
				<li class="name">
					<h1><a href="http://ingagelive.com"><img src="images/logo.png" alt="Ingage Dashbaord"></a></h1>
				</li>
				<li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
			</ul>
			<section class="top-bar-section">
				<ul class="right">
					<li class="secondary-color namesyntax">Welcome <%= username %></li>
					<li><a href="#/analytics" >Analytics</a></li>
					<li><a href="#/feedback_forms" >System</a></li>
					<li><a href="#" id="logout-link">Log Out</a></li>      
				</ul>
			</section>
		</header>
	</div>
	<div class="row">
		<div class="small-6 small-centered columns">
			<div class="alert-bar">
				<div id="loading-bar" data-alert="" class="alert-box loading" style="display:none;">
					<span class="alert-text">
						Loading
						<span class="spinner-css">      
							<span class="side sp_left">
								<span class="fill"></span>
							</span>
							<span class="side sp_right">
								<span class="fill"></span>
							</span>
						</span>
					</span>
				</div>
			</div>
		</div>
	</div>
	<script>
     $(".top-bar-section ul li>a").click(function(){ //
     	$("#loading-bar").fadeIn(300);
     });
 </script>
</script>

<script type="text/template" id="feedback-timeline-template">

	<div class="row">
		<div class="small-9 columns panel">
			<canvas id="line" data-type="Line" width="860" height="260"></canvas>
		</div>
		<div class="small-3 columns">
			<h5>Select location</h5>
			<select>
				<option>Location 1</option>
				<option>Location 2</option>
				<option>Location 3</option>
				<option>Location 4</option>
			</select>
		</div>
		<hr>
	</div>

	<div class="row collapse">
		<dl class="sub-nav action-nav small-12 columns">
			<dd class="checkbox-dd cform">
				<input id="check1" type="checkbox" name="check" value="check1">  <a href="#">All</a>
			</dd>
			<dd><a href="#">Mark as Read</a></dd>
			<dd><a href="#">Label</a></dd>
			<dd><i class="fi-trash"></i></dd>
			<dd><i class="fi-refresh"></i></dd>
		</dl>
	</div>

	<div class="row">
		<div class="small-7 columns feedback-column">
			<ul class="feedback-list feedback-timeline">
				<% _.each(feedbacks, function(feedback){ %>
					<li class="row yellow">
						<span class="small-1 cform columns">
							<input id="check1" type="checkbox" name="check" value="check1">  
						</span>
						<span class="small-2 columns"><%= feedback.get("instance").location %></span>
						<span class="small-7 columns feedback-content">
							<span class="customer-name namesyntax">
								<% if (feedback.get("customer").name) { %>
									<strong><%= feedback.get("customer").name %></strong>
									<% } else { %>
										No Name
										<% } %>
									</span> - 
									<span class="customer-message">
										<%= feedback.get("text") %>
									</span>
								</span>
								<span class="small-2 columns text-right secondary secondary-color"><%= $.timeago(new Date(feedback.get("received_at"))) %></span>
								<input type="hidden" name="feedback_id" value="<%= feedback.get('id') %>">
							</li>
							<% }); %>
			</ul>
			<div class="pagination-centered">
				<ul class="pagination">
					<li class="arrow unavailable"><a href="">&laquo;</a></li>
					<li class="current"><a href="">1</a></li>
					<li><a href="">2</a></li>
					<li><a href="">3</a></li>
					<li><a href="">4</a></li>
					<li class="unavailable"><a href="">&hellip;</a></li>
					<li><a href="">12</a></li>
					<li><a href="">13</a></li>
					<li class="arrow"><a href="">&raquo;</a></li>
				</ul>
			</div>
		</div>
	</div>
	<script>
		var npsdata = {
			labels : ["6 Weeks ago","5 Weeks ago","4 Weeks ago","3 Weeks ago","2 Weeks ago","1 Week ago","Today"],
			datasets : [
			{
				fillColor : "none",
				strokeColor : "rgba(220,220,220,1)",
				pointColor : "rgba(220,220,220,1)",
				pointStrokeColor : "#fff",
				data : [6,5,9,8,5,2,4]
			},     
			{
				fillColor : "none",
				strokeColor : "rgba(151,187,205,1)",
				pointColor : "rgba(151,187,205,1)",
				pointStrokeColor : "#fff",
				data : [2,4,4,1,9,2,10]
			}
			]
		}
		var myNPSchart = new Chart(document.getElementById("line").getContext("2d")).Line(npsdata);
	</script>
</script>

<script type="text/template" id="timeline-customer-details-template">
	<aside id="details" class="small-5 columns details-column">
		<div class="panel">
			<h3 class="namesyntax">
				<% if (feedback.get('customer').name) { %>
					<%= feedback.get('customer').name %>
					<% } else { %>
						No Name
						<% } %>
					</h3>
					<div class="row collapse">
						<div class="small-2 columns">
							<% if (feedback.get('customer').email) { %>
								<img src="http://www.gravatar.com/avatar/<%= MD5(feedback.get('customer').email) %>">
								<% } else { %>
									<img src="http://www.gravatar.com/avatar/">
									<% } %>
								</div>
								<div class="small-7 columns">
									<ul class="naked secondary contact-details">
										<li> 
											<% if (feedback.get('customer').email) { %>
												<%= feedback.get('customer').email %>
												<% } else { %>
													No e-Mail
													<% } %>
												</li>
												<li>
													<% if (feedback.get('customer').mobile) { %>
														<%= feedback.get('customer').mobile %>
														<% } else { %>
															No Mobile
															<% } %>
														</li>
													</ul>
												</div>
												<div class="small-3 columns">
													<div class="feedback-score green"> 9 </div>
													<div class="secondary-color secondary">
														<i class="fi-clock"></i><% var received_at = new Date(feedback.get("received_at")) %>
														<%= received_at.getHours() %>:<%= received_at.getMinutes() %>
													</div>
													<div class="secondary-color secondary">
														<i class="fi-calendar"></i>
														<%= received_at.getDate() %>-<%= received_at.getMonth() %>-<%= received_at.getFullYear() %>
													</div>
												</div>
											</div>
											<hr>
											<div class="secondary">
												<p><%= feedback.get("text") %></p>
											</div>
											<hr>
											<div class="secondary survey-column">
												<ol>
													<li><h5>Question 1</h5>
														<p>Answer 1</p>
													</li>
													<li><h5>Question 1</h5>
														<p>Answer 1</p>
													</li>
													<li><h5>Question 1</h5>
														<p>Answer 1</p>
													</li>
													<li><h5>Question 1</h5>
														<p>Answer 1</p>
													</li>

												</ol>
											</div>
											<hr>
											<h3>Instance Details</h3>
											<div class="form-details secondary">
												<div class="row collapse">
													<div class="small-4 columns secondary-color">Name:</div><div class="small-8 columns">
													<%= feedback.get("instance").name %>
												</div>
												<div class="small-4 columns secondary-color">Location:</div><div class="small-8 columns">
												<%= feedback.get("instance").location %>
											</div>
											<div class="small-4 columns secondary-color">Details:</div><div class="small-8 columns">
											<%= feedback.get("instance").description %>
										</div>
									</div>
								</div>
							</aside>
						</script>

						<script type="text/template" id="analytics-template">

							<div class="row">
								<h1>Analytics for Form 1 </h1>
								<div class="small-3 columns panel">
									<div class="form-change">
										<h4>Change Form</h4>
										<form>
										<select>
											<option>Form 1</option>
											<option>Form 2</option>
											<option>Form 3</option>
										</select>
										</form>
									</div>
									<div class="form-result">
									<h4>Form Results</h4>
										<div class="row">
											<div class="small-9 columns">
												<div class="clabel" style="background:#46BFBD;">Hindustan Times</div>
											</div>
											<div class="small-3 columns">
												<div class="clegend" style="color:#46BFBD;">22</div>
											</div>
										</div>
										<div class="row">
											<div class="small-9 columns">
												<div class="clabel" style="background:#FDB45C;">The Hindu</div>
											</div>
											<div class="small-3 columns">
												<div class="clegend" style="color:#FDB45C;">27</div>
											</div>
										</div>
										<div class="row">
											<div class="small-9 columns">
												<div class="clabel" style="background:#949FB1;">Live Mint</div>
											</div>
											<div class="small-3 columns">
												<div class="clegend" style="color:#949FB1;"> 11</div>
											</div>
										</div>
										<div class="row">
											<div class="small-9 columns">
												<div class="clabel" style="background:#4D5360;">New York Times</div>
											</div>
											<div class="small-3 columns">
												<div class="clegend" style="color:#4D5360;"> 33</div>
											</div>
										</div>
									</div>
								</div>
								<div class="small-9 columns">
									<div class="row">
										<div class="small-6 columns small-offset-6">
											<div id="reportrange" class="rangepicker-box text-right">
												<span ></span><i class="fi-calendar"></i>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="small-8 columns text-center">
											<canvas id="canvas0" height="450" width="450"></canvas>
										</div>
										<div class="small-4 columns">
											<div class="panel">
												<ul class="question-list naked">
													<li class="active">Question 1 and some words to add content</li>
													<li>Question 2 and some words to add content</li>
													<li>Question 3 and some words to add content</li>
													<li>Question 4 and some words to add content</li>
													<li>Question 5 and some words to add content</li>
													<li>Question 6 and some words to add content</li>
													<li>Question 7 and some words to add content</li>
												</ul>
											</div>
										</div>
									</div>
								</div>
							</div>
							<script>
							var doughnutData0 = [
								{
									value : 80,
									color : "#46BFBD",
									label: 'HELLO',
        labelColor: 'black',
        labelFontSize: '16'
								},
								{
									value : 100,
									color : "#FDB45C",
									label : 'Sleep5',
									labelColor : 'white',
									labelFontSize : '10',
									labelAlign : 'left'
								},
								{
									value : 40,
									color : "#949FB1",
									label : 'Sleep9',
									labelColor : 'white',
									labelFontSize : '10',
									labelAlign : 'left'
								},
								{
									value : 120,
									color : "#4D5360",
									label : 'Sleep6',
									labelColor : 'white',
									labelFontSize : '10',
									labelAlign : 'left'
								}

								];
								var myDoughnut0 = new Chart(document.getElementById("canvas0").getContext("2d")).Doughnut(doughnutData0,{
								        labelAlign: 'center'
								    });
							</script>
						</script>

						<script type="text/template" id="feedback-forms-list-template">
							<div class="row">
								<h2>Forms <a href="#/feedback_forms/new" class="button tiny">Create New Form</a></h2>
								<div class="small-9 columns">
									<ul class="feedback-list list-header">
										<li class="row">
											<span class="small-1 cform columns"><input type="checkbox"></span>
											<span class="small-2 columns">Name</span>
											<!-- <span class="small-2 columns">Instance</span> 
											<span class="small-3 columns">Description</span>
											<!-- <span class="small-4 columns">
											<span class="row collapse">
												<span class="small-4 columns">This week</span>
												<span class="small-4 columns">Last used</span>
												<span class="small-4 columns">All time</span>
											</span>
                    </span> //TODO: these attributes are currently not being supplied by the API -->
                </li>
            </ul>
            <ul class="feedback-list forms-list">
            	<% _.each(forms, function(form){ %>
            		<li class="row">
            			<span class="small-1 columns"><input type="checkbox"></span>
            			<span class="small-4 columns"><%= form.get("name") %></span>
                            <!-- <span class="small-2 columns">Table 1</span> //TODO: just showing the list of instances on right side -->
                            <span class="small-5 columns"><%= form.get("description") %></span>
                            <!-- <span class="small-4 columns">
                            <span class="row collapse">
                            	<span class="small-4 columns">16</span>
                            	<span class="small-4 columns">3 days</span>
                            	<span class="small-4 columns">108</span>
                            </span>
                            </span> //TODO: these attributes are currently not being supplied by the API -->
                            <input type="hidden" value="<%= form.get("id") %>">
                        </li>
                    <% }); %>
				</ul>
			</div>	
		</div>
</script>

<script type="text/template" id="form-instances-side-list-template">
	<div class="small-3 columns">
		<div class="panel" id="form-instances-side-list">
			<h5>Associated Instances</h5>
			<% if (instances.length > 0) { %>
				<a class="secondary" href="#/feedback_forms/<%= form_id %>/instances">View details</a>
				<ul class="side-nav">
					<% _.each(instances, function(instance){ %>
						<li><%= instance.get("name") %><a class="secondary secondary-color" href="http://customer.ingagelive.com#/<%= instance.get('id') %>">View</a></li>
						<% }); %>
				</ul>
				<% } else { %>
					<h6>No Instances Associated</h6>
					<% } %>
					<a href="#/feedback_forms/<%= form_id %>/instances/new" class="button small">Create New Instance</a>
				</div>
			</div>
		</script>

		<script type="text/template" id="form-instances-list-template">
			<div class="row">
				<div class="small-9 small-centered columns">
					<div class="row">
						<a class="secondary secondary-color" href="#/feedback_forms">Back to Form</a>
						<h2>Instances attached to <em>"<%= form.get('name') %>"</em><a href="#/feedback_forms/<%= form.get('id') %>/instances/new" class="button small">Create New Instance</a></h2>
						<div class="small-12 columns">
							<ul class="feedback-list list-header">
								<li class="row read">
									<span class="small-1 cform columns"><input type="checkbox"></span>
									<span class="small-2 columns">Name</span>
									<span class="small-2 columns">Location</span>
									<span class="small-3 columns">Description </span>
								</li>
							</ul>
							<ul class="feedback-list">
								<% _.each(instances, function(instance){ %>
									<li class="row">
										<span class="small-1 cform columns"><input type="checkbox"></span>
										<span class="small-2 columns"><%= instance.get("name") %></span>
										<span class="small-2 columns"><%= instance.get("location") %></span>
										<span class="small-3 columns"><%= instance.get("description") %></span>
										<span class="small-3 columns"><a href="http://customer.ingagelive.com#/<%= instance.get('id') %>">View</a></span>

									</li>
									<% }); %>
							</ul>
						</div>	
					</div>
				</div>
			</div>
		</script>

		<script type="text/template" id="form-creation-form-template">
			<div class="row">
				<h2>Create a New Form</h2>
				<div class="small-9 small-centered columns">
					<div class="row">
						<form id="form-form" name="form-form" class="small-6 columns panel">
							<fieldset>
								<div class="form-element">
									<label for="name">Form Name:</label>
									<input type="text" id="instance-name" required placeholder="eg. feedback for new menu" name="name" />
									<label for="name">Form Question:</label>
									<input type="text" id="instance-name" required placeholder="eg. how was your experience?" name="question" />
									<label for="name">Form Description:</label>
									<textarea id="instance-description" class="form-textarea" required name="description" placeholder="eg. Tablet kept at the table"></textarea>
								</div>
							</fieldset>
							<div class="form-element text-right">
								<button type="submit" class="medium success">Create Form</button>
							</div>
						</form>   
						<div class="small-4 small-offset-1 columns panel">
							<p>Place to show hints based on what input is on focus</p>
						</div>
					</div>
				</div>
			</div>
		</script>

		<script type="text/template" id="instance-creation-form-template">
			<div class="small-9 small-centered columns">
				<div class="row">
					<h2> Create a New instance for <em><%= form.get("name") %></em></h2>
					<form id="instances-form" name="login-form" class="small-6 columns panel">
						<fieldset>
							<div class="form-element">
								<label for="name">Instance Name:</label>
								<input type="text" id="name" required placeholder="eg. feedback for new menu" name="name" />
								<label for="name">Instance Location:</label>
								<input type="text" id="location" required placeholder="eg. Table No.1" name="location" />
								<label for="name">Instance Description:</label>
								<textarea id="description" class="form-textarea" required name="description" placeholder="eg. Tablet kept at the table"></textarea>
								<input type="hidden" value="<%= form.get('id') %>" name="form_id">
							</div>
						</fieldset>
						<div class="form-element text-right">
							<button type="submit" class="small primary">Create instance</button>
						</div>
					</form>   
					<div class="small-5 small-offset-1 columns panel">
						<p>Place to show hints based on what input is on focus</p>
					</div>
				</div>
			</div>
		</script>

		<script type="text/template" id="footer-template">
			<footer class="row">
				<div class="small-12 columns secondary secondary-color">
					<hr />
					<div class="row">
						<div class="small-5 columns">
							<p>&copy; Copyright Mutiny Labs 2013</p>
						</div>
						<div class="small-7 columns">
							<ul class="inline-list nav-list right">
								<li><a href="#">Legal</a></li>
							</ul> 
						</div>
					</div>
				</div>
			</footer>
		</script>

		<script src="js/foundation/foundation.js"></script>
		<script src="js/foundation/foundation.topbar.js"></script>
		<script src="js/foundation/foundation.forms.js"></script>
		<script src="js/plugins/chart.min.js"></script>
		<script src="js/plugins/moment.min.js"></script>
		<script src="js/plugins/daterangepicker.js"></script>
		<script src="js/plugins/jquery.tristate.min.js"></script>
		<script>
			$(document).foundation();
		</script>
		<script src="js/plugins/script.js"></script> <!-- //TODO: Fix the loading-bar fadein. It works in console -->

	</body>
	</html>
